(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(30),r=c.n(s),i=(c(74),c(16)),o=(c(75),c(76),c(60)),j=c.n(o),d=c(59),l=c.n(d),b=c(44),h=c.n(b),u=c(106),O=c(108),m=c(45),p=c.n(m),x=(c(77),c(33)),f=x.a.initializeApp({apiKey:"AIzaSyAxc-5WvGbg6Yh5MHnkwXJarpZgcQfadsI",authDomain:"whatsapp-a9984.firebaseapp.com",projectId:"whatsapp-a9984",storageBucket:"whatsapp-a9984.appspot.com",messagingSenderId:"563376756986",appId:"1:563376756986:web:9e84c7e77f46f50fce1143",measurementId:"G-PFZJBX29WT"}).firestore(),v=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,N=f,S=c(34),y=c(4);var C=function(e){var t,c=e.id,n=e.addNewChat,s=e.name,r=Object(a.useState)(""),o=Object(i.a)(r,2),j=o[0],d=o[1],l=Object(a.useState)(""),b=Object(i.a)(l,2),h=b[0],u=b[1];return Object(a.useEffect)((function(){c&&N.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){d(Math.floor(5e3*Math.random()))}),[]),n?Object(y.jsx)("div",{onClick:function(){var e=prompt("please enter the name of room");e&&N.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(y.jsx)("h2",{children:"Add New Chat"})}):Object(y.jsx)(S.b,{to:"/rooms/".concat(c),children:Object(y.jsxs)("div",{className:"sidebarChat",children:[Object(y.jsx)(O.a,{src:"http://avatars.dicebear.com/api/human/".concat(j,".svg")}),Object(y.jsxs)("div",{className:"sidebarChat_info",children:[Object(y.jsx)("h2",{children:s}),Object(y.jsx)("p",{children:null===(t=h[0])||void 0===t?void 0:t.message})]})]})})},_=Object(a.createContext)(),w=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(y.jsx)(_.Provider,{value:Object(a.useReducer)(t,c),children:n})},I=function(){return Object(a.useContext)(_)};var k=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),c=t[0],n=t[1],s=I(),r=Object(i.a)(s,2),o=r[0].user;return r[1],Object(a.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(y.jsxs)("div",{className:"sidebar",children:[Object(y.jsxs)("div",{className:"sidebar_header",children:[Object(y.jsx)(O.a,{src:null===o||void 0===o?void 0:o.photoURL}),Object(y.jsxs)("div",{className:"sidebar_headerRight",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(l.a,{})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(j.a,{})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{})})]})]}),Object(y.jsxs)("div",{className:"sidebar_search",children:[Object(y.jsx)("div",{className:"sidebar_searchContainer",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(p.a,{})})}),Object(y.jsx)("input",{type:"text",placeholder:"search or start new chat"})]}),Object(y.jsxs)("div",{className:"sidebar_chats",children:[Object(y.jsx)(C,{addNewChat:!0}),c.map((function(e){return Object(y.jsx)(C,{id:e.id,name:e.data.name},e.id)}))]})]})},M=c(51),A=c.n(M),E=c(61),T=(c(90),c(62)),B=c.n(T),D=c(63),F=c.n(D),G=c(64),P=c.n(G),R=c(11);var U=function(){var e,t,c=Object(a.useState)(),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(),j=Object(i.a)(o,2),d=j[0],l=j[1],b=Object(R.f)().roomId,m=Object(a.useState)(""),f=Object(i.a)(m,2),v=f[0],g=f[1],S=Object(a.useState)([]),C=Object(i.a)(S,2),_=C[0],w=C[1],k=I(),M=Object(i.a)(k,2),T=M[0].user;M[1],Object(a.useEffect)((function(){b&&(N.collection("rooms").doc(b).onSnapshot((function(e){return g(e.data().name)})),N.collection("rooms").doc(b).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return w(e.docs.map((function(e){return e.data()})))})))}),[b]);var D=function(){var e=Object(E.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log({input:s}),N.collection("rooms").doc(b).collection("messages").add({message:s,name:T.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),r("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),Object(y.jsxs)("div",{className:"chat",children:[Object(y.jsxs)("div",{className:"chat_header",children:[Object(y.jsx)(O.a,{src:"http://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(y.jsxs)("div",{className:"chat_headerInfo",children:[Object(y.jsx)("h3",{children:v}),Object(y.jsx)("p",{children:null===(e=_[_.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toUTCString()})]}),Object(y.jsxs)("div",{className:"chat_headerRight",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(p.a,{})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(B.a,{})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{})})]})]}),Object(y.jsx)("div",{className:"chat_body",children:_.map((function(e){return Object(y.jsxs)("p",{className:"chat_message ".concat(e.name==T.displayName&&"chat_sent"),children:[Object(y.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(y.jsx)("span",{className:"chat_timestamp",children:"time stamp"})]})}))}),Object(y.jsxs)("div",{className:"chat_footer",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(F.a,{})}),Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{value:s,onChange:function(e){r(e.target.value)},placeholder:"Type Your Message",type:"text"}),Object(y.jsx)("button",{onClick:D,type:"submit",children:"Send"})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(P.a,{})})]})]})},J=c(65),W=(c(91),c(107)),q=c(52),L="SET_USER",Y=function(e,t){switch(console.log(t),t.type){case L:return Object(q.a)(Object(q.a)({},e),{},{user:t.user});default:return e}};var z=function(){var e=I(),t=Object(i.a)(e,2);Object(J.a)(t[0]);var c=t[1];return Object(y.jsx)("div",{className:"login",children:Object(y.jsxs)("div",{className:"login_container",children:[Object(y.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSVyM8UqYD7e1vRD1jy21OySMs-GCkUQi5O-A&usqp=CAU",alt:""}),Object(y.jsx)("div",{className:"login_text",children:Object(y.jsx)("h1",{children:"Sign in to whatsapp"})}),Object(y.jsx)(W.a,{type:"submit",onClick:function(){v.signInWithPopup(g).then((function(e){c({type:L,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})]})})};var Q=function(){var e=I(),t=Object(i.a)(e,2),c=t[0].user;return t[1],Object(y.jsx)("div",{className:"app",children:c?Object(y.jsx)("div",{className:"app_body",children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(k,{}),Object(y.jsx)(R.c,{children:Object(y.jsx)(R.a,{path:"/rooms/:roomId",children:Object(y.jsx)(U,{})})})]})}):Object(y.jsx)(z,{})})},V=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,109)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(w,{initialState:{user:null},reducer:Y,children:Object(y.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[92,1,2]]]);
//# sourceMappingURL=main.1e95da98.chunk.js.map